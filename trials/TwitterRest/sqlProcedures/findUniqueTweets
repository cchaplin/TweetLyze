CREATE FUNCTION traverse_json_objects()
RETURNS void as $$

DECLARE jsonObj json;
BEGIN


FOR jsonObj IN 

select count(*)
from
(SELECT  json_array_elements(t1.tweets) as array_elements
FROM 

(select tweets from tweets where trendId in(select id from trends where trend = '#IPL7' ))as t1) as t2
where t2.array_elements->>'text'<> ''


LOOP 
	Select jsonObj;

END LOOP;

END;

$$ LANGUAGE plpgsql;


select json_extract_path_text(t3.json_elements,"text") as "text" , 
json_extract_path_text(t3.json_elements,"geo") as "geo", 
json_extract_path_text(t3.json_elements,"retweeted") as "retweeted"  , 
json_extract_path_text(t3.json_elements,"in_reply_to_screen_name") as "in_reply_to_screen_name" ,
json_
    (select distinct(json_extract_path_text(t2.jsonElements,'id_str') as "id" , t2.jsonElements as "json_elements" )
        from
            (select json_array_elements(t1.tweets) as jsonElements 
                from
                    (select tweets from tweets)as t1)as t2) as t3)




